{% comment %}
  Renders an article card for a given blog with settings to either show the image or not.

  Accepts:
  - blog: {Object} Blog object
  - article: {Object} Article object
  - show_image: {String} The setting either show the article image or not. If it's not included it will show the image by default
  - show_date: {String} The setting either show the article date or not. If it's not included it will not show the image by default
  - show_author: {String} The setting either show the article author or not. If it's not included it will not show the author by default

  Usage:
  {% render 'article-card' blog: blog, article: article, show_image: section.settings.show_image %}
{% endcomment %}

{%- if article and article != empty -%}
  {%- liquid
    assign ratio = 1
    if media_aspect_ratio != null
      assign ratio = media_aspect_ratio
    endif
  -%}

  <article
    class="article-card{% if article.image == blank or show_image == false %} article-card--no-image{% endif %}"
    aria-labelledby="Article-{{ article.id }}"
  >
    <a href="{{ article.url }}" class="article-content motion-reduce">
      {%- if show_image == true and article.image -%}
        {%- if card_style == 'masonry' -%}
          <div class="article-card__image media media--landscape">
            <img
              srcset="
                {%- if article.image.src.width >= 165 -%}{{ article.image.src | image_url: width: 165 }} 165w,{%- endif -%}
                {%- if article.image.src.width >= 360 -%}{{ article.image.src | image_url: width: 360 }} 360w,{%- endif -%}
                {%- if article.image.src.width >= 533 -%}{{ article.image.src | image_url: width: 533 }} 533w,{%- endif -%}
                {%- if article.image.src.width >= 720 -%}{{ article.image.src | image_url: width: 720 }} 720w,{%- endif -%}
                {%- if article.image.src.width >= 1000 -%}{{ article.image.src | image_url: width: 1000 }} 1000w,{%- endif -%}
                {%- if article.image.src.width >= 1500 -%}{{ article.image.src | image_url: width: 1500 }} 1500w,{%- endif -%}
              "
              src="{{ article.image.src | image_url: width: 533 }}"
              sizes="(min-width: 992px) 50vw, 100vw"
              alt="{{ article.image.src.alt | escape }}"
              width="{{ article.image.width }}"
              height="{{ article.image.height }}"
              loading="lazy"
              class="motion-reduce"
            >
          </div>
        {%- else -%}
          <div
            class="
              card__meida--inner {% if media_height != 'adapt' %} article-media--position article-card__image--{{ media_height }}{% endif %}
              {% if article.image and show_image %} ratio{% endif %}
            "
          >
            {%- if show_image == true and article.image -%}
              <div
                class="article-card__image media"
                {% if media_height == 'adapt' %}
                  style="padding-bottom: {{ 1 | divided_by: article.image.aspect_ratio | times: 100 }}%;"
                {% endif %}
              >
                <img
                  srcset="
                    {%- if article.image.src.width >= 165 -%}{{ article.image.src | image_url: width: 165 }} 165w,{%- endif -%}
                    {%- if article.image.src.width >= 360 -%}{{ article.image.src | image_url: width: 360 }} 360w,{%- endif -%}
                    {%- if article.image.src.width >= 533 -%}{{ article.image.src | image_url: width: 533 }} 533w,{%- endif -%}
                    {%- if article.image.src.width >= 720 -%}{{ article.image.src | image_url: width: 720 }} 720w,{%- endif -%}
                    {%- if article.image.src.width >= 1000 -%}{{ article.image.src | image_url: width: 1000 }} 1000w,{%- endif -%}
                    {%- if article.image.src.width >= 1500 -%}{{ article.image.src | image_url: width: 1500 }} 1500w,{%- endif -%}
                  "
                  src="{{ article.image.src | image_url: width: 533 }}"
                  sizes="(min-width: 992px) 50vw, 100vw"
                  alt="{{ article.image.src.alt | escape }}"
                  width="{{ article.image.width }}"
                  height="{{ article.image.height }}"
                  loading="lazy"
                  class="motion-reduce"
                >
              </div>
            {%- endif -%}
          </div>
        {%- endif -%}
      {%- endif -%}

      <div class="article-card__info">
        {%- if show_date or show_author or show_comment -%}
          <div class="article__meta">
            {%- if show_author -%}
              <span class="meta__info--item">
                <span class="person_svg">
                  <svg version="1.1" id="fi_747376" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
                  <g>
                  	<g>
                  		<path d="M437.02,330.98c-27.883-27.882-61.071-48.523-97.281-61.018C378.521,243.251,404,198.548,404,148
                  			C404,66.393,337.607,0,256,0S108,66.393,108,148c0,50.548,25.479,95.251,64.262,121.962
                  			c-36.21,12.495-69.398,33.136-97.281,61.018C26.629,379.333,0,443.62,0,512h40c0-119.103,96.897-216,216-216s216,96.897,216,216
                  			h40C512,443.62,485.371,379.333,437.02,330.98z M256,256c-59.551,0-108-48.448-108-108S196.449,40,256,40
                  			c59.551,0,108,48.448,108,108S315.551,256,256,256z"></path>
                  	</g>
                  </g>
                  </svg>
                </span>
                {{ article.author -}}
              </span>
            {%- endif -%}

            {%- if show_date -%}
              <span class="meta__info--item circle-divider">
                <span class="person_svg">
                  <svg
                    version="1.1"
                    id="Capa_1"
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    x="0px"
                    y="0px"
                    viewBox="0 0 512 512"
                    style="enable-background:new 0 0 512 512;"
                    xml:space="preserve"
                  >
                    <g>
                    	<g>
                    		<g>
                    			<circle cx="386" cy="210" r="20"/>
                    			<path d="M432,40h-26V20c0-11.046-8.954-20-20-20c-11.046,0-20,8.954-20,20v20h-91V20c0-11.046-8.954-20-20-20
                    				c-11.046,0-20,8.954-20,20v20h-90V20c0-11.046-8.954-20-20-20s-20,8.954-20,20v20H80C35.888,40,0,75.888,0,120v312
                    				c0,44.112,35.888,80,80,80h153c11.046,0,20-8.954,20-20c0-11.046-8.954-20-20-20H80c-22.056,0-40-17.944-40-40V120
                    				c0-22.056,17.944-40,40-40h25v20c0,11.046,8.954,20,20,20s20-8.954,20-20V80h90v20c0,11.046,8.954,20,20,20s20-8.954,20-20V80h91
                    				v20c0,11.046,8.954,20,20,20c11.046,0,20-8.954,20-20V80h26c22.056,0,40,17.944,40,40v114c0,11.046,8.954,20,20,20
                    				c11.046,0,20-8.954,20-20V120C512,75.888,476.112,40,432,40z"/>
                    			<path d="M391,270c-66.72,0-121,54.28-121,121s54.28,121,121,121s121-54.28,121-121S457.72,270,391,270z M391,472
                    				c-44.663,0-81-36.336-81-81s36.337-81,81-81c44.663,0,81,36.336,81,81S435.663,472,391,472z"/>
                    			<path d="M420,371h-9v-21c0-11.046-8.954-20-20-20c-11.046,0-20,8.954-20,20v41c0,11.046,8.954,20,20,20h29
                    				c11.046,0,20-8.954,20-20C440,379.954,431.046,371,420,371z"/>
                    			<circle cx="299" cy="210" r="20"/>
                    			<circle cx="212" cy="297" r="20"/>
                    			<circle cx="125" cy="210" r="20"/>
                    			<circle cx="125" cy="297" r="20"/>
                    			<circle cx="125" cy="384" r="20"/>
                    			<circle cx="212" cy="384" r="20"/>
                    			<circle cx="212" cy="210" r="20"/>
                    		</g>
                    	</g>
                    </g>
                  </svg>
                </span>
                {{ article.published_at | date: '%b %d, %Y' }}
              </span>
            {%- endif -%}
          </div>
        {%- endif -%}

        {%- if section.settings.show_title -%}
          <h3 class="post-title h4">
            <a href="{{ article.url }}">{{ article.title }}</a>
          </h3>
        {% endif %}

        {%- if show_content -%}
          {%- if article.excerpt.size > 0 or article.content.size > 0 -%}
            <p class="article-card__excerpt">
              {%- if article.excerpt.size > 0 -%}
                {{ article.excerpt | strip_html | truncatewords: 18 }}
              {%- else -%}
                {{ article.content | strip_html | truncatewords: 18 }}
              {%- endif -%}
            </p>
          {%- endif -%}
        {%- endif -%}

        {% if read_button_arrow %}
          <div class="article__button">
            <span class="article__button--title"
              >
              <a class="blog-readmore-btn" href="{{ article.url }}">
                {{- section.settings.read_more_button | default: 'Read more' -}}
                
                   <span class="right__btn_svg">
                     <svg id="fi_14440636" enable-background="new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><g id="Layer_2_00000103972821825980288310000012755641873027120305_"><g id="Layer_2_copy_13"><g id="_113"><path d="m479 0h-386.9c-18.2 0-33 14.8-33 33s14.8 33 33 33h307.1l-389.5 389.6c-12.9 12.9-12.9 33.8 0 46.7s33.8 12.9 46.7 0l389.5-389.6v307.1c0 18.2 14.8 33 33 33s33-14.8 33-33v-386.8c.1-18.2-14.7-33-32.9-33z"></path></g></g></g></svg>
                   </span>
              </a></span
            >
          </div>
        {% endif %}
      </div>
    </a>
  </article>
{%- endif -%}
